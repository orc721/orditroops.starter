# Quick Notes & Commentary on Ordi Troops & BRC69



fun ordi troops fact - now trending and no. 1 or 2 on Magic Eden - see https://magiceden.io/ordinals/marketplace/orditroops  ...

... the claim is to be generative or such .. BUT where is the generative metadata (attributes to filter / search) on Magic Eden ... none / zero / nada  ... BIG FAIL #1 

... now if you click on a trooper to see if it is "recursive" ... the submodules listed are NOT the generative images BUT it is a single javascript inscribe.  BIG FAIL #2  

... and the trooper itself is NOT an image but a .HTML frame ... BIG FAIL #3

... and here's the official BRC69 proposal / spec - last update .... last week (!) -> https://github.com/luminexord/brc69   BIG FAIL #4 

... and who is the author or are the authors? ... luminexord (!) .. if you cannot stand behind what you propose than ...   BIG FAIL #5   





## More

BRC69 deploy inscribe / text (application/json) - <https://ordinals.com/inscription/c4591981ec0c1253cdd68de5522a42c777e9f04ffacc0756921ef05bb0c779edi0>


``` json
{
   "p":"brc69",
   "op":"deploy",
   "collection":{
      "slug":"orditroops",
      "name":"OrdiTroops",
      "description":"1250 Troopers sacrifice themselves to test Bitcoin\\'s blockchain innovation",
      "creator":"RAF",
      "supply":1250
   },
   "wl":{
      "limit":1688834700,
      "ins":[
         [
            0,
            "a80a34ac3dfbe7d4f38ac61c4a0489a8ae1d02bdc9914cfb9825627081c04af0i0"
         ],
         [
            0,
            "1addbcc9266bfc2096822cd9e163715522fed51b7f50e296d134b23b74a4697ai0"
         ]
      ]
   },
   "attributes":[
      "d4d45c45f9aaa30888ccd05dcce35f8260109dda177aeb334b7d4c45d2371774i0",
      "8e4bc3811223a75bcff8e20781b0a8951c9d0b2f8696539c8be0f2b26e438ed6i0",
      "47fab2124590f1336624079afeefa2b63a7387ff07dbc6d4fad2b4a955cfe438i0",
      "6b5bfeb4b0c36922fe53be009f99993d334bb18f76e7c102dc4eebde4b946dedi0",
      "d4ff810f643d1da9b7dfb63fee3f5004d31480a8009524c4ac791aa5d15e7b02i0",
      "20f5fa1f9737d6d248299e82d3739e94dd73d00d75be7181bf299e2ef449c44di0",
      "e735762de1a6aacfa0f103b7839fb2c1070d4ae86a39ea0591972fc4707a4c68i0",
      "94fa4e2234df4f1e104967d66213678f6e8aebb9e35cb456f28470de0aba25a4i0",
      "45703748a77f772abafc5cd79ef63a3ebb96bd741abcba49ffa44aa0a57ea036i0",
      "fcf9d0dde38f91ae8e62ec74a4179ccfc224907c98ce1a27b49b9fbe657d6d3ci0",
      "d80789c413a7285480a499a580a1f380167dfe08cbc516a9da10db9f2d85f4a3i0",
      "d0a7694851272a332dd6441c28c776adaea6d851c9d405abdeed49a7e9e655d5i0",
      "4fd640da27de38de862062b350fc983812034b296d2ace90c3e06d11ae961755i0",
      "1ff0b25f3500708602a3b3a919603d45c79a0c556844a05f0b95bed0732c74d4i0",
      "ac449c25012243bbaf0b7d1ac17cdb3b19dfacabe1e95e0412a8ebf900fab53ei0",
      "a102ae5ff01353caf390f161487d926aa57b3e1d8ea449d7528fc0442de27753i0",
      "4b38a3de076b24a9d33809b92ce5cd6dddcbd94dd5e9e533819a9def13c8257ci0",
      "8edd0a44b1bf01745bfd8e2e61562238000777ae57be90d2d8d8a32e1e5db083i0",
      "49015536acfbcc8fe9aa1cf3539a6ab0233d7515e04483c682819bfc38e6ac90i0",
      "a5470e5249defaab9b0cc288b95dddfb61d89ce904ffa9e6a22a4d61cfb6d694i0",
      "eb5f8ce7e52a94cc0f67fc50ba0894165ae17ca9e0b5f4beac7ddc4974789096i0",
      "1b79049585b441eeb7b768eb972aa054a4349018eeb46345718a70c2a713aa9bi0",
      "ea1b3158f6ec751138c2a03875459c76bc91c6289bc719bdaa84bcf2543614c6i0",
      "632826c0f06d3464e8392adf1be4a550da169e09e38ab9d80f489be7ac7af2e9i0",
      "32543d06b3590db82f6c170a89e0f8179a0872910da2a74e7744c46717b0ec51i0",
      "50751bfd4f678c5c88804735a2c33ef68aef124ac3c7c225a1018743db94995ci0",
      "fa156f7d6dbbc2c111167a3108845087430e167cfeea86fbb4a8550015652090i0",
      "6e3973e8a4afdb2f4a406ea296369e76f04a1f42233a59eb3eae5ee288d664adi0",
      "42bfdca1e4b07b9acbc9f3fe0e5952a4f880288ec1b62d04712f918abfbaa7bci0",
      "31e01b56aa70bb6c0f190741526a6231e4e4d6b5f877846c0e4043549dac57cfi0",
      "4808d957c2c5287545e258f807a94c4443c0fd51122720e6f85aa0c65771b4dei0",
      "448ade9a9291cc6e2ed25c517e93034a9921e05010a409f9c2aca4da0c5057e0i0",
      "e6f55e652e2bc499520f90aa1538a4ed166b86a9dcf14dd2a2517d4c0f1b58e2i0",
      "dd1d7c42dc3bc1f6811e72dacbf9788ed2de16563fe5681f41541f0f53ea3ae9i0",
      "8604a08469b08f6c77d2433edc858f1d0a3600958c95ce88ce736244188826eci0",
      "ec99785b253c01583e6041e981a7a47134553fae57947e9d0c6c8949bd9e3bf1i0",
      "4037f6c5f32b97f48a31787436fc2c02024d4f5446195339e9d4869547fbaff3i0",
      "dc1761f5feeeb85ba64026dc58d82998bd676c8a49481e20cb241d0f60c62ff7i0",
      "6051a3043cc86624b9cd25cddd0fe70c0d1f54c615bad36306896f95ceeefef9i0",
      "5dad71e7d973e0c1cdf6208a923b68ddedab6e5c2c01a30cbc5b543d5b386edai0",
      "6af490830692602bc3114fadf6d1ba2adef759316bd2153078df8f08a2d85deai0",
      "ab8b226fc213e02e775312e861a760bd16984e6b31dbab756b2f91c07ba29c09i0",
      "3f851287420adc6c5148132f919aee4e148bdb710ba76fa51ef3f48e2a7af80ci0",
      "a216c26623647e3cbdc7bfacb41781e63b25c2532652837f7ee0812e200bac12i0",
      "949e320bc765e3945142a8be2a0d2434ea587d35a22a308209c2d44792c01b2ci0",
      "a51bb784e9c61eef612eeed89e3c8c42ef9aaa57513a8d70f9d17ee2c1f731bci0",
      "6d9c47fd976b6ace9287bedbf3cb11bb9f6c65ca267e24490fc2059a9cd544e6i0",
      "e08a568e554e6530d03f29d21a9767b9e5f58e3a4c6a7fcd39c44ec429b60a9ci0",
      "ae4da4c78dfdf1673c0cb8947d75ae0c9de26155d9a956a732d497e081b238afi0",
      "05ca64400d1160b6df7d1a29fc0680249a9802bc206b5daa4e33b4e1691cf030i0",
      "8d20817558436b13687042619f7cdc4eab62139a1d45a2b2db9efad4f21efb76i0",
      "5066e2e8329a2adcea66b8b1b02aca88a0ee14776da2ae91ddf98ef2eadbf08fi0",
      "6a4053efb63f6ca9c512dee1cdef3425bcb52ebd9fb8e9e2a80e6a59f0a0dd10i0",
      "aa1e8b6d7323202cfd815c2ea743601689f3a77daaa3942c850a0a2587234522i0",
      "d5fac8d6f55830c510816a92eece66f3baa8fb0e58683ac9f6862beab43d1a3ei0",
      "755e747ceae15282568be7c1d48ef3e4ffe25e7a8adc79cf1178ccfc02380c73i0",
      "69737038380b074751808561908f00fe07a5bb1a606c5ed18532528c0e917475i0",
      "671710df83a6d86bac22ae31252e216280d22aa8af70f2b25d89226f5cb6f7b5i0"
   ]
}
```


mint example (text/html):

``` html
<script t="7,54,31,28,39,3,16" 
  m='{"p":"brc69" "op":"mint" "s":"orditroops" "id":"2428"}' 
  src="/content/090cf70d6f7c2b85a2646285118ce0f87f498ab4be782dc4e406609fd98c4392i0">
<script>
```

javascript "on-chain" render - <https://ordinals.com/inscription/090cf70d6f7c2b85a2646285118ce0f87f498ab4be782dc4e406609fd98c4392i0> (text/javascript)

``` js
/*
{
  "p":"brc69",
  "op":"compiler",
  "s": "orditroops"
}
*/

// EDIT
const collectionJsonUrl = '/content/c4591981ec0c1253cdd68de5522a42c777e9f04ffacc0756921ef05bb0c779edi0';
const previewUrl = ''
const imageRendering = 'auto'
const renderSize = {
  width: 1000,
  height: 1000
};

async function loadImage(url) {
  return new Promise((resolve, reject) => {
    const image = document.createElement('img')
    image.src = url
    image.crossOrigin = 'anonymous'
    image.onload = () => {
      resolve(image)
    }
    image.onerror = () => {
      // Some display fallbacks for when the image fails to load
      if (!image.src.startsWith('https://')) {
        image.src = 'https://ordinals.com' + url
      } else if (image.src.startsWith('https://ordinals.com')) {
        image.src = 'https://ord-mirror.magiceden.dev' + url
      }
    }
  })
}

async function renderImage(imageEl, urls) {
  const canvas = document.createElement('canvas');
  canvas.width = renderSize.width;
  canvas.height = renderSize.height;

  const ctx = canvas.getContext("2d");
  ctx.imageSmoothingEnabled = false;

  const images = await Promise.all((urls).map(loadImage))
  images.forEach(_ => ctx.drawImage(_, 0, 0, canvas.width, canvas.height))
  imageEl.src = canvas.toDataURL("image/png")
}

async function getAllTraits(traitsUrl, retry = false) {
  try {
    const collectionMetadataRes = await fetch(traitsUrl)
    const collectionMetadata = await collectionMetadataRes.json()
    return collectionMetadata.attributes.map(_ => `/content/${_}`)
  } catch (e) {
    if (!retry) {
      const timestamp = Math.floor(Date.now() / (60000 * 10)) // 10 minutes
      const newTraitsUrl = `${traitsUrl}?timestamp=${timestamp}`
      return getAllTraits(newTraitsUrl, true)
    }
    throw e
  }
}

function createInitialImage() {
  // Manipulate the <body> tag
  document.body.style.margin = '0px';
  document.body.style.padding = '0px';

  // Create and set properties of the <img> tag
  const img = document.createElement('img');
  img.id = 'img';
  img.style.height = '100%';
  img.style.width = '100%';
  img.style.objectFit = 'contain';
  img.style.imageRendering = imageRendering;

  return img
}

async function createInscriptionHtml() {
  const imageEl = createInitialImage()

  try {
    // Get traits
    const allTraits = await getAllTraits(collectionJsonUrl)

    // Process traits
    const selectedTraitIndexes = document.querySelector('script[t]').getAttribute('t').split(',');
    const traits = selectedTraitIndexes.map(_ => allTraits[+_])

    // Render traits
    await renderImage(imageEl, traits);
  } catch (e) {
    console.error(e)

    // Render previewUrl image
    if (previewUrl) {
      imageEl.src = previewUrl
    }
  } finally {
    // Append the <img> tag to the <body>
    document.body.appendChild(imageEl);
  }
}

window.onload = function() {
  createInscriptionHtml();
}
```
